import * as React from 'react';
import { compose, graphql, GraphqlQueryControls } from 'react-apollo';
import { FeaturedList } from './Components/Featured/Featured';
import { Box, Heading } from 'grommet';
import { ExternalLink } from '../ExternalLink/ExternalLink';
import { loader } from 'graphql.macro';
import { HomeDataQuery } from './schema';
import { ReleaseCard } from './Components/ReleaseCard';
import { InfoLinks, ListItems } from './Components/InfoLinks';
import styled from 'styled-components';

const homeDataQuery = loader('./homedata.graphql');

const DISCORD_LINK = `https://discord.gg/XmtkJ4F`;
const TRELLO_ROADMAP_LINK = `https://trello.com/b/1d37IN6q/pretzel-rocks-public-roadmap`;

interface GraphqlProps {
  data: GraphqlQueryControls & HomeDataQuery;
}
const HomeNote = styled('p')`
  text-align: center;
  font-size: 18px;
  max-width: 600px;
  min-width: 400px;
`;
type Props = GraphqlProps;

class HomePresentation extends React.Component<Props, {}> {
  public render() {
    // const featured = this.props.data.loading
    //   ? null
    //   : this.props.data.homeData.featured.map((featuredRelease, idx) => (
    //       <ReleaseCard key={idx} album={featuredRelease} />
    //     ));

    // const gettingStarted = this.props.data.loading
    //   ? null
    //   : this.props.data.homeData.gettingStarted.map((helpItem, id) => (
    //       <ListItems key={id}>
    //         <ExternalLink href={helpItem.url}>{helpItem.name}</ExternalLink>
    //       </ListItems>
    //     ));

    // const comingSoon = this.props.data.loading
    //   ? null
    //   : this.props.data.homeData.comingSoon.map((featureItem, id) => (
    //       <ListItems key={id}>
    //         <ExternalLink href={featureItem.url}>{featureItem.name}</ExternalLink>
    //       </ListItems>
    //     ));
    const downloadEnv = process.env.REACT_APP_CONTEXT === 'production' ? 'prod' : 'staging';
    return (
      <div style={{ overflow: 'auto', padding: '30px', width: '100%' }}>
        <Box align="center">
          <Heading level="2" margin={{ top: '40px', bottom: '50px' }}>
            Pardon the dust, and welcome to the Beta!
          </Heading>
          <HomeNote>
            This Beta is a complete re-write of the Pretzel player, our backend architecture and even our licensing with
            rightsholders. These changes were necessary to take Pretzel to the next level.
          </HomeNote>
          <Heading level="3">🎉🎈 NEW to the Beta! 🎈🎉</Heading>
          <HomeNote>
            💻 Desktop!! &nbsp;
            <a
              href={`https://beta-download.pretzel.rocks/AuxClients/desktop/${downloadEnv}/Pretzel-BetaDesktop.exe`}
              download
            >
              Windows
            </a>
            &nbsp;|&nbsp;
            <a
              href={`https://beta-download.pretzel.rocks/AuxClients/desktop/${downloadEnv}/Pretzel-BetaDesktop.dmg`}
              download
            >
              Mac
            </a>
            <br />
            (Does not replace non-beta Pretzel)
            <br />
            👍 Likes/Dislikes 👎
            <br />
            🙈 🙉 🙊 Filters
            <br />
          </HomeNote>
          <Heading level="3">Coming Soon</Heading>
          <HomeNote>
            Hotkeys
            <br />
            Playlists
            <br />
            Chat Notifications
            <br />
          </HomeNote>
          <HomeNote>
            You can keep track of our progress&nbsp;
            <a href={TRELLO_ROADMAP_LINK} target="_blank" style={{ textDecoration: 'underline' }}>
              on our roadmap
            </a>
            .
          </HomeNote>
          <HomeNote>Thanks so much for using Pretzel.</HomeNote>
        </Box>
        <Box align="center" margin={{ top: '16px' }}>
          <p style={{ fontSize: 32, margin: '0px 0px 4px 0px' }}>
            <ExternalLink href={DISCORD_LINK}>
              <i className="pretzel-icon-discord" />
            </ExternalLink>
          </p>
          <Heading level="5" margin={{ top: '0px', bottom: '4px' }}>
            If you need any help at all, please join our Discord
          </Heading>
          <p style={{ fontSize: 11 }}>be nice to Rini</p>
        </Box>
      </div>
    );
  }
}

export const Home = compose(graphql(homeDataQuery))(HomePresentation);
