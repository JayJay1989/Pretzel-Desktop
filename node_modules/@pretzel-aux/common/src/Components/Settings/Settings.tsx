import * as React from 'react';
import { General } from './Sections/General';
import { Account } from './Sections/Account';
import { Audio } from './Sections/Audio/Audio';
import { Playback } from './Sections/Playback';
import { WhatsPlaying } from './Sections/WhatsPlaying';
import { Keybinds } from './Sections/Keybinds/Keybinds';
import { Extras } from './Sections/Extras/Extras';
import { SongRequests } from './Sections/SongRequests/SongRequests';
import { FileOutput } from './Sections/FileOutput/FileOutput';
import styled from 'styled-components/macro';
import { PretzelColors } from '../../Styled';
import { Box } from 'grommet';

interface PublicProps {}

type Props = PublicProps;

interface State {}

export const VersionText = styled.p`
  color: ${PretzelColors.baseMuted};
  font-size: 14px;
  margin-bottom: 5px;
  user-select: text;
`;

export class SettingsPresentation extends React.Component<Props, State> {
  state = {};

  public render() {
    const IS_ELECTRON = /electron/i.test(navigator.userAgent);

    let buildVersion = 'Pretzel Rocks Play: ';
    buildVersion += `${process.env.REACT_APP_COMMIT.toString().substring(0, 7)} (${process.env.REACT_APP_BRANCH})`;
    if (IS_ELECTRON) {
      const electronVersion = window.require('electron').remote.app.getVersion();
      buildVersion += ` | Desktop App: ${electronVersion}`;
    }

    return (
      <div style={{ overflow: 'auto' }}>
        {/*<WhatsNew /> */}
        <General />
        <Account />
        <Audio />
        <Playback />
        <WhatsPlaying />
        <FileOutput />
        <SongRequests />
        <Keybinds />

        <Box pad="medium">
          <VersionText>{buildVersion}</VersionText>
        </Box>
        <Extras />
      </div>
    );
  }
}

export const Settings = SettingsPresentation;
