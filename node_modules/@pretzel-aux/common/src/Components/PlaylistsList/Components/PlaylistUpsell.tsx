import * as React from 'react';
import { Heading, Text, Anchor } from 'grommet';
import { flowRight as compose } from 'lodash';

import { PlatformContext, withPlatformContext, URLS } from '../../../Core/Platform';

type PropsFromPlatform = Pick<PlatformContext, 'pretzelUser' | 'openExternalLink'>;

type Props = PropsFromPlatform;

export class PlaylistUpsellPresentation extends React.Component<Props> {
  handlePremiumClick = () => {
    this.props.openExternalLink(URLS.PREMIUM);
  };

  render() {
    return (
      <div style={{ padding: 30 }}>
        <Heading level="2">Unlock the Power of Playlists</Heading>
        <Text>
          Level up to a Premium account on <Anchor onClick={this.handlePremiumClick}>the Pretzel website</Anchor>.
        </Text>
      </div>
    );
  }
}

function mapPlatformToProps(c: PlatformContext): PropsFromPlatform {
  return {
    openExternalLink: c.openExternalLink,
  };
}

export const PlaylistUpsell = compose(withPlatformContext(mapPlatformToProps))(PlaylistUpsellPresentation);
