import * as React from 'react';
import { compose } from 'react-apollo';
import { PlatformContext, withPlatformContext } from '../../Core/Platform';

interface PublicProps {}

interface LinkProps {
  href?: string;
  children: React.ReactNode;
}

type PropsFromContext = Pick<PlatformContext, 'openExternalLink'>;

type Props = PublicProps & LinkProps & PropsFromContext;

class ExternalLinkPresentation extends React.Component<Props, {}> {
  onClick = () => {
    return this.props.openExternalLink(this.props.href);
  };

  render() {
    return <a onClick={this.onClick}>{this.props.children}</a>;
  }
}
function mapContextToProps(c: PlatformContext): PropsFromContext {
  return {
    openExternalLink: c.openExternalLink
  };
}
export const ExternalLink = compose(withPlatformContext<PropsFromContext>(mapContextToProps))(
  ExternalLinkPresentation
);
